generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id          String         @id @default(uuid())
  name        String?
  phoneNumber String?        @unique
  discordId   String?        @unique
  googleId    String?        @unique
  facebookId  String?        @unique
  books       BookInstance[]
}

model Book {
  id         String         @id
  title      String
  author     String
  price      Int
  image      String
  grade      Grade
  subject    Subject
  isAdvanced Boolean
  url        String
  instances  BookInstance[]
}

model BookInstance {
  id        String    @id @default(uuid())
  status    String
  condition Condition
  book      Book      @relation(fields: [bookId], references: [id])
  bookId    String
  owner     User      @relation(fields: [ownerId], references: [id])
  ownerId   String
}

enum Condition {
  NEW
  GOOD
  DAMAGED
  BAD
}

enum Grade {
  FIRST
  SECOND
  THIRD
  FOURTH
}

enum Subject {
  MATH
  ENGLISH
  POLISH
  GERMAN
  RUSSIAN
  HISTORY
  CIVICS
  CHEMISTRY
  BIOLOGY
  GEOGRAPHY
  PHYSICS
  COMPUTER_SCIENCE
  ENTREPRENEURSHIP
  EDUCATION_FOR_SAFETY
}
